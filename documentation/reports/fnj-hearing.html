<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ãƒ’ã‚¢ãƒªãƒ³ã‚°ã‚·ãƒ¼ãƒˆ â€” FNJ ã‚³ãƒ¼ãƒãƒ¬ãƒ¼ãƒˆã‚µã‚¤ãƒˆ ãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«</title>

<!-- Firebase SDK (compat v10) -->
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

<style>
/* ============================================================
   RESET & BASE
   ============================================================ */
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; font-size: 16px; }
body {
  font-family: 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', 'Meiryo', 'Yu Gothic', sans-serif;
  color: #1a202c;
  background: #f0f4f8;
  min-height: 100vh;
  line-height: 1.7;
}
a { color: #1d4ed8; }
input, textarea, select, button { font-family: inherit; }

/* ============================================================
   CONFIG WARNING BANNER
   ============================================================ */
#config-warning {
  background: #fef3c7;
  border-bottom: 3px solid #f59e0b;
  padding: 0.75rem 1.5rem;
  text-align: center;
  font-size: 0.88rem;
  font-weight: 700;
  color: #78350f;
  display: none;
}
#config-warning a { color: #92400e; text-decoration: underline; }

/* ============================================================
   HEADER
   ============================================================ */
.page-header {
  background: linear-gradient(135deg, #0c1e4a 0%, #0f2d6e 60%, #1a4fa0 100%);
  padding: 1.75rem 5%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
  flex-wrap: wrap;
}
.header-brand { display: flex; align-items: center; gap: 0.9rem; }
.header-logo {
  width: 44px; height: 44px;
  background: rgba(255,255,255,0.12);
  border: 1.5px solid rgba(255,255,255,0.2);
  border-radius: 10px;
  display: flex; align-items: center; justify-content: center;
  color: #fff;
  font-size: 0.8rem;
  font-weight: 800;
  letter-spacing: -0.03em;
  flex-shrink: 0;
}
.header-text .header-sub { font-size: 0.72rem; color: rgba(255,255,255,0.55); letter-spacing: 0.06em; }
.header-text .header-main { font-size: 1.05rem; font-weight: 800; color: #fff; letter-spacing: 0.01em; }
.header-badge {
  background: rgba(255,255,255,0.1);
  border: 1px solid rgba(255,255,255,0.18);
  color: rgba(255,255,255,0.8);
  font-size: 0.75rem;
  font-weight: 600;
  padding: 0.35rem 0.85rem;
  border-radius: 50px;
  letter-spacing: 0.04em;
}

/* ============================================================
   PROGRESS BAR (client view)
   ============================================================ */
.progress-wrap {
  background: #fff;
  border-bottom: 1px solid #e2e8f0;
  padding: 0.9rem 5%;
  position: sticky;
  top: 0;
  z-index: 100;
  box-shadow: 0 1px 4px rgba(0,0,0,0.06);
}
.progress-bar-track {
  height: 6px;
  background: #e2e8f0;
  border-radius: 3px;
  overflow: hidden;
  margin-bottom: 0.5rem;
}
.progress-bar-fill {
  height: 100%;
  background: linear-gradient(90deg, #1d4ed8, #0ea5e9);
  border-radius: 3px;
  transition: width 0.4s ease;
  width: 0%;
}
.progress-text {
  font-size: 0.78rem;
  color: #64748b;
  display: flex;
  justify-content: space-between;
}
.progress-text span { font-weight: 700; color: #1d4ed8; }

/* ============================================================
   MAIN CONTENT WRAPPER
   ============================================================ */
.content-wrap { max-width: 780px; margin: 0 auto; padding: 2rem 1.25rem 4rem; }

/* ============================================================
   INTRO CARD
   ============================================================ */
.intro-card {
  background: #fff;
  border-radius: 14px;
  padding: 1.75rem 2rem;
  margin-bottom: 1.75rem;
  border-left: 5px solid #1d4ed8;
  box-shadow: 0 1px 4px rgba(0,0,0,0.06);
}
.intro-card h2 { font-size: 1rem; font-weight: 800; color: #0f2557; margin-bottom: 0.5rem; }
.intro-card p { font-size: 0.87rem; color: #4a5568; line-height: 1.75; }
.intro-card .intro-meta {
  margin-top: 1rem;
  display: flex; flex-wrap: wrap; gap: 0.75rem;
}
.intro-chip {
  font-size: 0.78rem;
  background: #eff6ff;
  color: #1e40af;
  border: 1px solid #bfdbfe;
  padding: 0.25rem 0.75rem;
  border-radius: 50px;
  font-weight: 600;
}

/* ============================================================
   FORM SECTIONS
   ============================================================ */
.form-section {
  background: #fff;
  border-radius: 14px;
  margin-bottom: 1.5rem;
  box-shadow: 0 1px 4px rgba(0,0,0,0.06);
  overflow: hidden;
}
.form-section-header {
  padding: 1rem 1.5rem;
  display: flex;
  align-items: center;
  gap: 0.85rem;
}
.section-num-badge {
  width: 30px; height: 30px;
  border-radius: 8px;
  display: flex; align-items: center; justify-content: center;
  font-size: 0.82rem;
  font-weight: 800;
  color: #fff;
  flex-shrink: 0;
}
.form-section-title { font-size: 0.97rem; font-weight: 800; color: #fff; }
.form-section-body { padding: 1.5rem; }

/* Section color themes */
.sec-1 .form-section-header { background: linear-gradient(135deg, #0f2557, #1e3a8a); }
.sec-1 .section-num-badge { background: rgba(255,255,255,0.2); }
.sec-2 .form-section-header { background: linear-gradient(135deg, #1e3a8a, #2563eb); }
.sec-2 .section-num-badge { background: rgba(255,255,255,0.2); }
.sec-3 .form-section-header { background: linear-gradient(135deg, #1d4ed8, #0ea5e9); }
.sec-3 .section-num-badge { background: rgba(255,255,255,0.2); }
.sec-4 .form-section-header { background: linear-gradient(135deg, #065f46, #059669); }
.sec-4 .section-num-badge { background: rgba(255,255,255,0.2); }
.sec-5 .form-section-header { background: linear-gradient(135deg, #4c1d95, #7c3aed); }
.sec-5 .section-num-badge { background: rgba(255,255,255,0.2); }
.sec-6 .form-section-header { background: linear-gradient(135deg, #92400e, #d97706); }
.sec-6 .section-num-badge { background: rgba(255,255,255,0.2); }
.sec-7 .form-section-header { background: linear-gradient(135deg, #9f1239, #e11d48); }
.sec-7 .section-num-badge { background: rgba(255,255,255,0.2); }
.sec-8 .form-section-header { background: linear-gradient(135deg, #1e293b, #334155); }
.sec-8 .section-num-badge { background: rgba(255,255,255,0.2); }
.sec-9 .form-section-header { background: linear-gradient(135deg, #0c4a6e, #0284c7); }
.sec-9 .section-num-badge { background: rgba(255,255,255,0.2); }

/* ============================================================
   FORM ELEMENTS
   ============================================================ */
.form-group { margin-bottom: 1.25rem; }
.form-group:last-child { margin-bottom: 0; }
.form-label {
  display: block;
  font-size: 0.87rem;
  font-weight: 700;
  color: #1e293b;
  margin-bottom: 0.45rem;
}
.form-label .req {
  color: #dc2626;
  font-size: 0.72rem;
  font-weight: 700;
  margin-left: 0.3rem;
  vertical-align: middle;
}
.form-label .opt {
  color: #94a3b8;
  font-size: 0.72rem;
  font-weight: 600;
  margin-left: 0.3rem;
}
.form-hint { font-size: 0.78rem; color: #64748b; margin-top: 0.25rem; }
.form-input, .form-select, .form-textarea {
  width: 100%;
  padding: 0.7rem 0.9rem;
  border: 2px solid #e2e8f0;
  border-radius: 8px;
  font-size: 0.9rem;
  color: #1a202c;
  background: #fff;
  outline: none;
  transition: border-color 0.2s, box-shadow 0.2s;
}
.form-input:focus, .form-select:focus, .form-textarea:focus {
  border-color: #1d4ed8;
  box-shadow: 0 0 0 3px rgba(29,78,216,0.1);
}
.form-textarea { min-height: 100px; resize: vertical; line-height: 1.65; }
.form-grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }

/* Checkbox & Radio */
.check-group, .radio-group { display: flex; flex-direction: column; gap: 0.55rem; }
.check-group.inline, .radio-group.inline { flex-direction: row; flex-wrap: wrap; gap: 0.5rem 1.25rem; }
.check-item, .radio-item {
  display: flex;
  align-items: flex-start;
  gap: 0.55rem;
  cursor: pointer;
  font-size: 0.88rem;
  color: #374151;
  padding: 0.5rem 0.75rem;
  border-radius: 8px;
  border: 1.5px solid #e2e8f0;
  background: #f8fafc;
  transition: all 0.15s;
}
.check-item:hover, .radio-item:hover { border-color: #1d4ed8; background: #eff6ff; }
.check-item input, .radio-item input { width: 16px; height: 16px; accent-color: #1d4ed8; margin-top: 2px; flex-shrink: 0; cursor: pointer; }
.check-item label, .radio-item label { cursor: pointer; line-height: 1.45; }
.check-item.checked, .radio-item.checked { border-color: #1d4ed8; background: #eff6ff; }

/* Feature Priority Matrix */
.feat-matrix { width: 100%; border-collapse: collapse; font-size: 0.85rem; }
.feat-matrix th, .feat-matrix td {
  border: 1px solid #e2e8f0;
  padding: 0.6rem 0.75rem;
  text-align: center;
}
.feat-matrix thead th {
  background: #0f2557;
  color: #fff;
  font-weight: 700;
  font-size: 0.82rem;
  white-space: nowrap;
}
.feat-matrix thead th:first-child { text-align: left; }
.feat-matrix tbody tr:nth-child(even) td { background: #f8fafc; }
.feat-matrix tbody td:first-child { text-align: left; font-weight: 600; color: #1e293b; padding-left: 0.85rem; }
.feat-matrix input[type="radio"] { width: 18px; height: 18px; accent-color: #1d4ed8; cursor: pointer; }
.feat-matrix tr:hover td { background: #eff6ff !important; }

/* ============================================================
   SUBMIT BUTTON AREA
   ============================================================ */
.submit-area { text-align: center; margin-top: 2rem; }
.submit-btn {
  background: linear-gradient(135deg, #1d4ed8, #0ea5e9);
  color: #fff;
  font-size: 1.05rem;
  font-weight: 800;
  padding: 1rem 3rem;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s;
  box-shadow: 0 4px 20px rgba(29,78,216,0.3);
  letter-spacing: 0.02em;
  min-width: 260px;
}
.submit-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 28px rgba(29,78,216,0.4); }
.submit-btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }
.submit-note { font-size: 0.8rem; color: #64748b; margin-top: 0.75rem; }

/* ============================================================
   THANK YOU SCREEN
   ============================================================ */
#thank-you {
  display: none;
  text-align: center;
  background: #fff;
  border-radius: 14px;
  padding: 4rem 2rem;
  box-shadow: 0 1px 4px rgba(0,0,0,0.06);
}
.ty-icon { font-size: 3.5rem; margin-bottom: 1.25rem; }
.ty-title { font-size: 1.4rem; font-weight: 800; color: #0f2557; margin-bottom: 0.75rem; }
.ty-desc { font-size: 0.92rem; color: #4a5568; line-height: 1.75; max-width: 480px; margin: 0 auto; }

/* ============================================================
   ADMIN VIEW
   ============================================================ */
.admin-header {
  background: linear-gradient(135deg, #0c1e4a 0%, #1e293b 100%);
  padding: 1.5rem 5%;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
  flex-wrap: wrap;
}
.admin-header-title { font-size: 1.1rem; font-weight: 800; color: #fff; }
.admin-header-sub { font-size: 0.78rem; color: rgba(255,255,255,0.55); margin-top: 0.1rem; }
.admin-live-badge {
  display: flex;
  align-items: center;
  gap: 0.4rem;
  background: rgba(16,185,129,0.15);
  border: 1px solid rgba(16,185,129,0.3);
  color: #34d399;
  font-size: 0.78rem;
  font-weight: 700;
  padding: 0.35rem 0.85rem;
  border-radius: 50px;
}
.live-dot {
  width: 8px; height: 8px;
  border-radius: 50%;
  background: #10b981;
  animation: pulse 1.5s infinite;
}
@keyframes pulse {
  0%, 100% { opacity: 1; transform: scale(1); }
  50% { opacity: 0.5; transform: scale(0.85); }
}

.admin-wrap { max-width: 1100px; margin: 0 auto; padding: 2rem 1.25rem 4rem; }

/* Admin Stats */
.admin-stats { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-bottom: 2rem; }
.admin-stat-card {
  background: #fff;
  border-radius: 12px;
  padding: 1.25rem 1.5rem;
  box-shadow: 0 1px 4px rgba(0,0,0,0.06);
  display: flex;
  align-items: center;
  gap: 1rem;
}
.admin-stat-icon { font-size: 1.6rem; }
.admin-stat-label { font-size: 0.78rem; color: #64748b; font-weight: 600; }
.admin-stat-val { font-size: 1.6rem; font-weight: 800; color: #0f2557; line-height: 1.1; }

/* Submission Cards */
.submissions-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1.25rem;
  flex-wrap: wrap;
  gap: 0.75rem;
}
.submissions-title { font-size: 1rem; font-weight: 800; color: #0f2557; }
.submissions-sort { font-size: 0.82rem; color: #64748b; }

.sub-card {
  background: #fff;
  border-radius: 14px;
  margin-bottom: 1rem;
  box-shadow: 0 1px 4px rgba(0,0,0,0.06);
  overflow: hidden;
  transition: box-shadow 0.2s;
}
.sub-card:hover { box-shadow: 0 4px 16px rgba(0,0,0,0.1); }
.sub-card-header {
  padding: 1.1rem 1.5rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1rem;
  cursor: pointer;
  user-select: none;
}
.sub-card-header:hover { background: #f8fafc; }
.sub-card-left { display: flex; align-items: center; gap: 0.85rem; }
.sub-avatar {
  width: 40px; height: 40px;
  border-radius: 50%;
  background: linear-gradient(135deg, #1d4ed8, #0ea5e9);
  display: flex; align-items: center; justify-content: center;
  color: #fff;
  font-size: 0.95rem;
  font-weight: 800;
  flex-shrink: 0;
}
.sub-name { font-size: 0.97rem; font-weight: 700; color: #0f2557; }
.sub-dept { font-size: 0.8rem; color: #64748b; }
.sub-card-meta { display: flex; align-items: center; gap: 0.75rem; flex-shrink: 0; }
.sub-time { font-size: 0.78rem; color: #94a3b8; white-space: nowrap; }
.sub-expand-icon { color: #94a3b8; font-size: 0.85rem; transition: transform 0.2s; }
.sub-card.expanded .sub-expand-icon { transform: rotate(180deg); }

.sub-card-body {
  display: none;
  border-top: 1px solid #f0f4f8;
  padding: 1.25rem 1.5rem;
}
.sub-card.expanded .sub-card-body { display: block; }

.sub-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem; }
.sub-field { margin-bottom: 0.75rem; }
.sub-field-label { font-size: 0.75rem; font-weight: 700; color: #64748b; letter-spacing: 0.04em; text-transform: uppercase; margin-bottom: 0.2rem; }
.sub-field-value { font-size: 0.88rem; color: #1e293b; line-height: 1.55; }
.sub-field-value.empty { color: #94a3b8; font-style: italic; }
.sub-section-divider {
  font-size: 0.8rem;
  font-weight: 700;
  color: #1d4ed8;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  padding: 0.75rem 0 0.5rem;
  border-top: 1px solid #f0f4f8;
  margin-top: 0.75rem;
}
.sub-section-divider:first-child { padding-top: 0; border-top: none; margin-top: 0; }

.tag-list { display: flex; flex-wrap: wrap; gap: 0.35rem; margin-top: 0.25rem; }
.sub-tag {
  font-size: 0.75rem;
  font-weight: 600;
  padding: 0.2rem 0.55rem;
  border-radius: 4px;
  background: #eff6ff;
  color: #1e40af;
  border: 1px solid #bfdbfe;
}

/* Admin empty state */
#admin-empty {
  text-align: center;
  padding: 4rem 2rem;
  color: #94a3b8;
  display: none;
}
#admin-empty .empty-icon { font-size: 3rem; margin-bottom: 1rem; }
#admin-empty p { font-size: 0.9rem; }

/* Admin loading */
#admin-loading {
  text-align: center;
  padding: 3rem;
  color: #64748b;
  font-size: 0.9rem;
}

/* ============================================================
   RESPONSIVE
   ============================================================ */
@media (max-width: 640px) {
  .form-grid-2 { grid-template-columns: 1fr; }
  .admin-stats { grid-template-columns: 1fr; }
  .sub-grid { grid-template-columns: 1fr; }
  .feat-matrix { font-size: 0.78rem; }
  .feat-matrix th, .feat-matrix td { padding: 0.4rem 0.4rem; }
  .check-item, .radio-item { font-size: 0.83rem; }
  .submit-btn { min-width: unset; width: 100%; }
}
</style>
</head>
<body>

<!-- Config Warning -->
<div id="config-warning">
  âš ï¸ Firebaseè¨­å®šãŒæœªå®Œäº†ã§ã™ã€‚HTMLã‚½ãƒ¼ã‚¹å†…ã® <code>YOUR_API_KEY</code> ç­‰ã‚’å®Ÿéš›ã®å€¤ã«ç½®ãæ›ãˆã¦ãã ã•ã„ã€‚
  <a href="https://console.firebase.google.com/" target="_blank">Firebase Console â†’</a>
</div>

<!-- ============================================================
     CLIENT VIEW
     ============================================================ -->
<div id="view-client">

  <!-- Page Header -->
  <header class="page-header">
    <div class="header-brand">
      <div class="header-logo">FNJ</div>
      <div class="header-text">
        <div class="header-sub">CORPORATE SITE RENEWAL</div>
        <div class="header-main">ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆ ãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ« ãƒ’ã‚¢ãƒªãƒ³ã‚°ã‚·ãƒ¼ãƒˆ</div>
      </div>
    </div>
    <div class="header-badge">ğŸ“‹ è¦ä»¶ãƒ’ã‚¢ãƒªãƒ³ã‚°</div>
  </header>

  <!-- Progress Bar -->
  <div class="progress-wrap">
    <div class="progress-bar-track">
      <div class="progress-bar-fill" id="progressFill"></div>
    </div>
    <div class="progress-text">
      <span id="progressLabel">å…¥åŠ›ã—ã¦ãã ã•ã„</span>
      <span id="progressPct">0%</span>
    </div>
  </div>

  <div class="content-wrap">

    <!-- Intro -->
    <div class="intro-card">
      <h2>ã”å›ç­”ã®ãŠé¡˜ã„</h2>
      <p>
        ã“ã®ãŸã³ã¯ã‚³ãƒ¼ãƒãƒ¬ãƒ¼ãƒˆã‚µã‚¤ãƒˆãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«ã«ã”é–¢å¿ƒã‚’ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚<br>
        ã‚ˆã‚Šç²¾åº¦ã®é«˜ã„ã”ææ¡ˆã‚’è¡Œã†ãŸã‚ã€ä»¥ä¸‹ã®é …ç›®ã«ã¤ã„ã¦ã”å›ç­”ã‚’ãŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚<br>
        æ‰€è¦æ™‚é–“ã®ç›®å®‰ã¯ç´„<strong>10ã€œ15åˆ†</strong>ã§ã™ã€‚
      </p>
      <div class="intro-meta">
        <span class="intro-chip">ğŸ“… ææ¡ˆæœŸé™ï¼š2026å¹´3æœˆ15æ—¥</span>
        <span class="intro-chip">ğŸ’° äºˆç®—ï¼š700ä¸‡å††ä»¥å†…</span>
        <span class="intro-chip">ğŸ—“ ç´å“ï¼š2027å¹´1æœˆ31æ—¥</span>
      </div>
    </div>

    <form id="hearingForm" novalidate>

      <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           Section 1: åŸºæœ¬æƒ…å ±
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div class="form-section sec-1">
        <div class="form-section-header">
          <div class="section-num-badge">1</div>
          <div class="form-section-title">ğŸ‘¤ åŸºæœ¬æƒ…å ±</div>
        </div>
        <div class="form-section-body">
          <div class="form-grid-2">
            <div class="form-group">
              <label class="form-label" for="name">ãŠåå‰<span class="req">å¿…é ˆ</span></label>
              <input class="form-input" type="text" id="name" name="name" placeholder="è¥¿ æ˜Œå“‰" required>
            </div>
            <div class="form-group">
              <label class="form-label" for="dept">éƒ¨ç½²å<span class="opt">ä»»æ„</span></label>
              <input class="form-input" type="text" id="dept" name="dept" placeholder="ä¾‹ï¼šãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°éƒ¨">
            </div>
          </div>
          <div class="form-grid-2">
            <div class="form-group">
              <label class="form-label" for="email">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹<span class="req">å¿…é ˆ</span></label>
              <input class="form-input" type="email" id="email" name="email" placeholder="nishi@fnj.co.jp" required>
            </div>
            <div class="form-group">
              <label class="form-label" for="phone">é›»è©±ç•ªå·<span class="opt">ä»»æ„</span></label>
              <input class="form-input" type="tel" id="phone" name="phone" placeholder="03-xxxx-xxxx">
            </div>
          </div>
        </div>
      </div>

      <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           Section 2: ç¾è¡Œã‚µã‚¤ãƒˆã®èª²é¡Œ
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div class="form-section sec-2">
        <div class="form-section-header">
          <div class="section-num-badge">2</div>
          <div class="form-section-title">ğŸ” ç¾è¡Œã‚µã‚¤ãƒˆã®èª²é¡Œ</div>
        </div>
        <div class="form-section-body">
          <div class="form-group">
            <label class="form-label">ç‰¹ã«å›°ã£ã¦ã„ã‚‹ã“ã¨ã‚’ãŠé¸ã³ãã ã•ã„ï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰</label>
            <div class="check-group" id="problemsGroup">
              <label class="check-item"><input type="checkbox" name="problems" value="ãƒ‡ã‚¶ã‚¤ãƒ³ãŒå¤ã„ãƒ»æ™‚ä»£é…ã‚Œã«æ„Ÿã˜ã‚‹"><label>ãƒ‡ã‚¶ã‚¤ãƒ³ãŒå¤ã„ãƒ»æ™‚ä»£é…ã‚Œã«æ„Ÿã˜ã‚‹</label></label>
              <label class="check-item"><input type="checkbox" name="problems" value="ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã§ã®è¡¨ç¤ºãƒ»æ“ä½œãŒã—ã«ãã„"><label>ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã§ã®è¡¨ç¤ºãƒ»æ“ä½œãŒã—ã«ãã„</label></label>
              <label class="check-item"><input type="checkbox" name="problems" value="æ¬²ã—ã„æƒ…å ±ã«ãŸã©ã‚Šç€ãã«ãã„ï¼ˆå‹•ç·šãŒä¸æ˜ç¢ºï¼‰"><label>æ¬²ã—ã„æƒ…å ±ã«ãŸã©ã‚Šç€ãã«ãã„ï¼ˆå‹•ç·šãŒä¸æ˜ç¢ºï¼‰</label></label>
              <label class="check-item"><input type="checkbox" name="problems" value="ã‚µãƒ¼ãƒ“ã‚¹å†…å®¹ãƒ»ç‰¹å¾´ãŒã‚ã‹ã‚Šã«ãã„"><label>ã‚µãƒ¼ãƒ“ã‚¹å†…å®¹ãƒ»ç‰¹å¾´ãŒã‚ã‹ã‚Šã«ãã„</label></label>
              <label class="check-item"><input type="checkbox" name="problems" value="å•ã„åˆã‚ã›ãƒ»è³‡æ–™è«‹æ±‚ã¸ã®èª˜å°ãŒå¼±ã„"><label>å•ã„åˆã‚ã›ãƒ»è³‡æ–™è«‹æ±‚ã¸ã®èª˜å°ãŒå¼±ã„</label></label>
              <label class="check-item"><input type="checkbox" name="problems" value="æ¤œç´¢æ©Ÿèƒ½ãŒãªã„ãƒ»ä½¿ã„ã«ãã„"><label>æ¤œç´¢æ©Ÿèƒ½ãŒãªã„ãƒ»ä½¿ã„ã«ãã„</label></label>
              <label class="check-item"><input type="checkbox" name="problems" value="ã‚µã‚¤ãƒˆã®æ›´æ–°ä½œæ¥­ãŒå¤§å¤‰ãƒ»æ‰‹é–“ãŒã‹ã‹ã‚‹"><label>ã‚µã‚¤ãƒˆã®æ›´æ–°ä½œæ¥­ãŒå¤§å¤‰ãƒ»æ‰‹é–“ãŒã‹ã‹ã‚‹</label></label>
              <label class="check-item"><input type="checkbox" name="problems" value="ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿ãŒé…ã„"><label>ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿ãŒé…ã„</label></label>
              <label class="check-item"><input type="checkbox" name="problems" value="SEOï¼ˆæ¤œç´¢é †ä½ï¼‰ãŒä½ãé›†å®¢ã§ãã¦ã„ãªã„"><label>SEOï¼ˆæ¤œç´¢é †ä½ï¼‰ãŒä½ãé›†å®¢ã§ãã¦ã„ãªã„</label></label>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label" for="problemsOther">ãã®ä»–ãƒ»è©³ã—ããŠèã‹ã›ãã ã•ã„<span class="opt">ä»»æ„</span></label>
            <textarea class="form-textarea" id="problemsOther" name="problemsOther" placeholder="ç¾è¡Œã‚µã‚¤ãƒˆã«ã¤ã„ã¦æ„Ÿã˜ã¦ã„ã‚‹èª²é¡Œã‚„æ”¹å–„ã—ã¦ã»ã—ã„ç‚¹ã‚’è‡ªç”±ã«ã”è¨˜å…¥ãã ã•ã„ã€‚"></textarea>
          </div>
        </div>
      </div>

      <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           Section 3: ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼å±¤
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div class="form-section sec-3">
        <div class="form-section-header">
          <div class="section-num-badge">3</div>
          <div class="form-section-title">ğŸ¯ ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼å±¤</div>
        </div>
        <div class="form-section-body">
          <div class="form-group">
            <label class="form-label">é‡è¦–ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼å±¤<span class="req">å¿…é ˆ</span></label>
            <div class="radio-group" id="targetPriorityGroup">
              <label class="radio-item"><input type="radio" name="targetPriority" value="B2Bï¼ˆäº‹æ¥­è€…ï¼‰ã‚’ç‰¹ã«é‡è¦–" required><label>ğŸ¢ B2Bï¼ˆäº‹æ¥­è€…ï¼‰ã‚’ç‰¹ã«é‡è¦– â€” ãƒ‡ãƒ™ãƒ­ãƒƒãƒ‘ãƒ¼ãƒ»ç®¡ç†ä¼šç¤¾å‘ã‘</label></label>
              <label class="radio-item"><input type="radio" name="targetPriority" value="B2Cï¼ˆå±…ä½è€…ãƒ»å€‹äººï¼‰ã‚’ç‰¹ã«é‡è¦–"><label>ğŸ  B2Cï¼ˆå±…ä½è€…ãƒ»å€‹äººï¼‰ã‚’ç‰¹ã«é‡è¦– â€” å…¥å±…è€…å‘ã‘</label></label>
              <label class="radio-item"><input type="radio" name="targetPriority" value="B2Bãƒ»B2C ã©ã¡ã‚‰ã‚‚åŒç­‰ã«é‡è¦–"><label>âš–ï¸ B2Bãƒ»B2C ã©ã¡ã‚‰ã‚‚åŒç­‰ã«é‡è¦–</label></label>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">ç‰¹ã«é‡è¦ãªB2Bã‚¿ãƒ¼ã‚²ãƒƒãƒˆï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰</label>
            <div class="check-group inline" id="b2bTargetsGroup">
              <label class="check-item"><input type="checkbox" name="b2bTargets" value="ãƒãƒ³ã‚·ãƒ§ãƒ³ãƒ‡ãƒ™ãƒ­ãƒƒãƒ‘ãƒ¼"><label>ãƒãƒ³ã‚·ãƒ§ãƒ³ãƒ‡ãƒ™ãƒ­ãƒƒãƒ‘ãƒ¼</label></label>
              <label class="check-item"><input type="checkbox" name="b2bTargets" value="ãƒãƒ³ã‚·ãƒ§ãƒ³ç®¡ç†ä¼šç¤¾"><label>ãƒãƒ³ã‚·ãƒ§ãƒ³ç®¡ç†ä¼šç¤¾</label></label>
              <label class="check-item"><input type="checkbox" name="b2bTargets" value="ä¸å‹•ç”£ä¼šç¤¾"><label>ä¸å‹•ç”£ä¼šç¤¾</label></label>
              <label class="check-item"><input type="checkbox" name="b2bTargets" value="ã‚¼ãƒã‚³ãƒ³ãƒ»å»ºè¨­ä¼šç¤¾"><label>ã‚¼ãƒã‚³ãƒ³ãƒ»å»ºè¨­ä¼šç¤¾</label></label>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label" for="targetDetail">ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã«ã¤ã„ã¦è£œè¶³<span class="opt">ä»»æ„</span></label>
            <textarea class="form-textarea" id="targetDetail" name="targetDetail" placeholder="ä¾‹ï¼šã‚¨ãƒªã‚¢ã‚„è¦æ¨¡æ„Ÿã€ç‰¹å®šã®è·ç¨®ãªã©ã€ã‚ˆã‚Šã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚’çµã£ã¦ã„ã‚‹å ´åˆã¯ã”è¨˜å…¥ãã ã•ã„ã€‚" style="min-height:80px;"></textarea>
          </div>
        </div>
      </div>

      <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           Section 4: ãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«ã®ç›®çš„ãƒ»ç›®æ¨™
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div class="form-section sec-4">
        <div class="form-section-header">
          <div class="section-num-badge">4</div>
          <div class="form-section-title">ğŸš€ ãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«ã®ç›®çš„ãƒ»ç›®æ¨™</div>
        </div>
        <div class="form-section-body">
          <div class="form-group">
            <label class="form-label">ãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«ã§é”æˆã—ãŸã„ã“ã¨ï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰</label>
            <div class="check-group" id="goalsGroup">
              <label class="check-item"><input type="checkbox" name="goals" value="å•ã„åˆã‚ã›æ•°ãƒ»ãƒªãƒ¼ãƒ‰ç²å¾—æ•°ã‚’å¢—ã‚„ã™"><label>å•ã„åˆã‚ã›æ•°ãƒ»ãƒªãƒ¼ãƒ‰ç²å¾—æ•°ã‚’å¢—ã‚„ã™</label></label>
              <label class="check-item"><input type="checkbox" name="goals" value="ã‚µãƒ¼ãƒ“ã‚¹å†…å®¹ã®ç†è§£ã‚’ä¿ƒé€²ã™ã‚‹"><label>ã‚µãƒ¼ãƒ“ã‚¹å†…å®¹ã®ç†è§£ã‚’ä¿ƒé€²ã™ã‚‹</label></label>
              <label class="check-item"><input type="checkbox" name="goals" value="ä¼æ¥­ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å‘ä¸Šã•ã›ã‚‹"><label>ä¼æ¥­ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å‘ä¸Šã•ã›ã‚‹</label></label>
              <label class="check-item"><input type="checkbox" name="goals" value="æ¡ç”¨å¿œå‹Ÿæ•°ã‚’å¢—ã‚„ã™"><label>æ¡ç”¨å¿œå‹Ÿæ•°ã‚’å¢—ã‚„ã™</label></label>
              <label class="check-item"><input type="checkbox" name="goals" value="æ—¢å­˜é¡§å®¢ã¸ã®æƒ…å ±æä¾›ã‚’å¼·åŒ–ã™ã‚‹"><label>æ—¢å­˜é¡§å®¢ã¸ã®æƒ…å ±æä¾›ã‚’å¼·åŒ–ã™ã‚‹</label></label>
              <label class="check-item"><input type="checkbox" name="goals" value="SEOãƒ»æ¤œç´¢æµå…¥ã‚’å‘ä¸Šã•ã›ã‚‹"><label>SEOãƒ»æ¤œç´¢æµå…¥ã‚’å‘ä¸Šã•ã›ã‚‹</label></label>
              <label class="check-item"><input type="checkbox" name="goals" value="ã‚µã‚¤ãƒˆæ›´æ–°ãƒ»é‹ç”¨ã‚’åŠ¹ç‡åŒ–ã™ã‚‹"><label>ã‚µã‚¤ãƒˆæ›´æ–°ãƒ»é‹ç”¨ã‚’åŠ¹ç‡åŒ–ã™ã‚‹ï¼ˆCMSå°å…¥ç­‰ï¼‰</label></label>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label" for="topGoal">æœ€ã‚‚é‡è¦ãªç›®æ¨™ã‚’ä¸€ã¤æ•™ãˆã¦ãã ã•ã„<span class="opt">ä»»æ„</span></label>
            <textarea class="form-textarea" id="topGoal" name="topGoal" placeholder="ä¾‹ï¼šã¾ãšå•ã„åˆã‚ã›æ•°ã‚’ç¾åœ¨ã®2å€ã«ã—ãŸã„ã€æ¡ç”¨ãƒšãƒ¼ã‚¸ã‚’å……å®Ÿã•ã›ãŸã„ã€ãªã©" style="min-height:80px;"></textarea>
          </div>
        </div>
      </div>

      <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           Section 5: ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ»ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¤ãƒ¡ãƒ¼ã‚¸
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div class="form-section sec-5">
        <div class="form-section-header">
          <div class="section-num-badge">5</div>
          <div class="form-section-title">ğŸ¨ ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ»ãƒ–ãƒ©ãƒ³ãƒ‰ã‚¤ãƒ¡ãƒ¼ã‚¸</div>
        </div>
        <div class="form-section-body">
          <div class="form-group">
            <label class="form-label">å¸Œæœ›ã™ã‚‹ã‚µã‚¤ãƒˆã®ã‚¤ãƒ¡ãƒ¼ã‚¸<span class="req">å¿…é ˆ</span></label>
            <div class="radio-group" id="designImageGroup">
              <label class="radio-item"><input type="radio" name="designImage" value="ã‚¯ãƒªãƒ¼ãƒ³ãƒ»ã‚·ãƒ³ãƒ—ãƒ«ãƒ»æ´—ç·´ã•ã‚ŒãŸ" required><label>âœ¨ ã‚¯ãƒªãƒ¼ãƒ³ãƒ»ã‚·ãƒ³ãƒ—ãƒ«ãƒ»æ´—ç·´ã•ã‚ŒãŸ</label></label>
              <label class="radio-item"><input type="radio" name="designImage" value="ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ãƒ»é‡åšæ„Ÿãƒ»ä¿¡é ¼æ„Ÿã®ã‚ã‚‹"><label>ğŸ¤ ãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ãƒ»é‡åšæ„Ÿãƒ»ä¿¡é ¼æ„Ÿã®ã‚ã‚‹</label></label>
              <label class="radio-item"><input type="radio" name="designImage" value="é©æ–°çš„ãƒ»ãƒ†ãƒƒã‚¯æ„Ÿãƒ»å…ˆé€²æ€§ã‚’æ„Ÿã˜ã‚‹"><label>âš¡ é©æ–°çš„ãƒ»ãƒ†ãƒƒã‚¯æ„Ÿãƒ»å…ˆé€²æ€§ã‚’æ„Ÿã˜ã‚‹</label></label>
              <label class="radio-item"><input type="radio" name="designImage" value="æ¸©ã‹ã¿ãƒ»è¦ªã—ã¿ã‚„ã™ã„ãƒ»ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼"><label>ğŸŒ± æ¸©ã‹ã¿ãƒ»è¦ªã—ã¿ã‚„ã™ã„ãƒ»ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼</label></label>
              <label class="radio-item"><input type="radio" name="designImage" value="ãã®ä»–ï¼ˆè‡ªç”±è¨˜å…¥æ¬„ã«è¨˜è¼‰ï¼‰"><label>ãã®ä»–ï¼ˆä¸‹ã®è‡ªç”±è¨˜å…¥æ¬„ã«è¨˜è¼‰ï¼‰</label></label>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">ç¾è¡Œã®ä¼æ¥­ã‚«ãƒ©ãƒ¼ï¼ˆé’ç³»ï¼‰ã«ã¤ã„ã¦</label>
            <div class="radio-group inline" id="brandColorGroup">
              <label class="radio-item"><input type="radio" name="brandColor" value="ç¶™ç¶šã—ãŸã„ï¼ˆé’ç³»ã‚’ç¶­æŒï¼‰"><label>ç¶™ç¶šã—ãŸã„ï¼ˆé’ç³»ã‚’ç¶­æŒï¼‰</label></label>
              <label class="radio-item"><input type="radio" name="brandColor" value="å°‘ã—å¤‰ãˆãŸã„ï¼ˆé’ãƒ™ãƒ¼ã‚¹ã§èª¿æ•´ï¼‰"><label>å°‘ã—å¤‰ãˆãŸã„ï¼ˆé’ãƒ™ãƒ¼ã‚¹ã§èª¿æ•´ï¼‰</label></label>
              <label class="radio-item"><input type="radio" name="brandColor" value="å¤§ããå¤‰ãˆãŸã„"><label>å¤§ããå¤‰ãˆãŸã„</label></label>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label" for="referenceUrls">å‚è€ƒã«ã—ãŸã„ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆï¼ˆURLï¼‰<span class="opt">ä»»æ„</span></label>
            <textarea class="form-textarea" id="referenceUrls" name="referenceUrls" placeholder="ä¾‹ï¼šhttps://example.comï¼ˆã“ã®ãƒ‡ã‚¶ã‚¤ãƒ³ãŒå¥½ãï¼‰&#10;https://sample.jpï¼ˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„æ§‹æˆãŒå‚è€ƒã«ãªã‚‹ï¼‰" style="min-height:90px;"></textarea>
          </div>
          <div class="form-group">
            <label class="form-label" for="ngDesign">é¿ã‘ãŸã„è‰²ãƒ»ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ»ãƒˆãƒ¼ãƒ³<span class="opt">ä»»æ„</span></label>
            <textarea class="form-textarea" id="ngDesign" name="ngDesign" placeholder="ä¾‹ï¼šèµ¤ç³»ã¯é¿ã‘ãŸã„ã€ãƒãƒƒãƒ—ã™ãã‚‹è¡¨ç¾ã¯NGã€ãªã©" style="min-height:80px;"></textarea>
          </div>
        </div>
      </div>

      <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           Section 6: å¿…è¦ãªæ©Ÿèƒ½ï¼ˆå„ªå…ˆåº¦ãƒãƒˆãƒªãƒƒã‚¯ã‚¹ï¼‰
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div class="form-section sec-6">
        <div class="form-section-header">
          <div class="section-num-badge">6</div>
          <div class="form-section-title">âš™ï¸ å¿…è¦ãªæ©Ÿèƒ½ â€” å„ªå…ˆåº¦</div>
        </div>
        <div class="form-section-body">
          <p style="font-size:0.85rem;color:#4a5568;margin-bottom:1rem;">å„æ©Ÿèƒ½ã®å„ªå…ˆåº¦ã‚’ãŠé¸ã³ãã ã•ã„ã€‚</p>
          <div style="overflow-x:auto;">
            <table class="feat-matrix">
              <thead>
                <tr>
                  <th style="width:45%;text-align:left;">æ©Ÿèƒ½</th>
                  <th style="color:#22c55e;">âœ… å¿…é ˆ</th>
                  <th style="color:#f59e0b;">ğŸ”¶ ã‚ã‚Œã°è‰¯ã„</th>
                  <th style="color:#94a3b8;">âŒ ä¸è¦</th>
                </tr>
              </thead>
              <tbody id="featureMatrix">
                <!-- JS ã§ç”Ÿæˆ -->
              </tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           Section 7: SEOãƒ»é›†å®¢
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div class="form-section sec-7">
        <div class="form-section-header">
          <div class="section-num-badge">7</div>
          <div class="form-section-title">ğŸ“ˆ SEOãƒ»é›†å®¢</div>
        </div>
        <div class="form-section-body">
          <div class="form-group">
            <label class="form-label">ç¾åœ¨å®Ÿæ–½ã—ã¦ã„ã‚‹æ–½ç­–ï¼ˆè¤‡æ•°é¸æŠå¯ï¼‰</label>
            <div class="check-group inline" id="seoMeasuresGroup">
              <label class="check-item"><input type="checkbox" name="seoMeasures" value="Googleã‚¢ãƒŠãƒªãƒ†ã‚£ã‚¯ã‚¹ç­‰ã®è¨ˆæ¸¬ãƒ„ãƒ¼ãƒ«å°å…¥æ¸ˆã¿"><label>è¨ˆæ¸¬ãƒ„ãƒ¼ãƒ«å°å…¥æ¸ˆã¿ï¼ˆGA4ç­‰ï¼‰</label></label>
              <label class="check-item"><input type="checkbox" name="seoMeasures" value="SEOå¯¾ç­–ã‚’å®Ÿæ–½ã—ã¦ã„ã‚‹"><label>SEOå¯¾ç­–ã‚’å®Ÿæ–½ã—ã¦ã„ã‚‹</label></label>
              <label class="check-item"><input type="checkbox" name="seoMeasures" value="ãƒªã‚¹ãƒ†ã‚£ãƒ³ã‚°åºƒå‘Šã‚’é‹ç”¨ã—ã¦ã„ã‚‹"><label>ãƒªã‚¹ãƒ†ã‚£ãƒ³ã‚°åºƒå‘Šã‚’é‹ç”¨ã—ã¦ã„ã‚‹</label></label>
              <label class="check-item"><input type="checkbox" name="seoMeasures" value="SNSã‚’é‹ç”¨ã—ã¦ã„ã‚‹"><label>SNSã‚’é‹ç”¨ã—ã¦ã„ã‚‹</label></label>
              <label class="check-item"><input type="checkbox" name="seoMeasures" value="ç‰¹ã«å¯¾ç­–ã—ã¦ã„ãªã„"><label>ç‰¹ã«å¯¾ç­–ã—ã¦ã„ãªã„</label></label>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label" for="keywords">ä¸Šä½è¡¨ç¤ºã‚’ç‹™ã„ãŸã„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰<span class="opt">ä»»æ„</span></label>
            <input class="form-input" type="text" id="keywords" name="keywords" placeholder="ä¾‹ï¼šãƒãƒ³ã‚·ãƒ§ãƒ³ ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆã€IoT ãƒãƒ³ã‚·ãƒ§ãƒ³ã€ãƒãƒ³ã‚·ãƒ§ãƒ³ç®¡ç† DX">
            <div class="form-hint">ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§è¤‡æ•°å…¥åŠ›ã§ãã¾ã™</div>
          </div>
          <div class="form-group">
            <label class="form-label">ãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«å¾Œã®åºƒå‘Šé‹ç”¨ã‚µãƒãƒ¼ãƒˆã«ã¤ã„ã¦</label>
            <div class="radio-group inline" id="adsSupportGroup">
              <label class="radio-item"><input type="radio" name="adsSupport" value="å¸Œæœ›ã™ã‚‹"><label>å¸Œæœ›ã™ã‚‹</label></label>
              <label class="radio-item"><input type="radio" name="adsSupport" value="æ¤œè¨ä¸­"><label>æ¤œè¨ä¸­</label></label>
              <label class="radio-item"><input type="radio" name="adsSupport" value="ä¸è¦"><label>ä¸è¦</label></label>
            </div>
          </div>
        </div>
      </div>

      <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           Section 8: ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ»äºˆç®—
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div class="form-section sec-8">
        <div class="form-section-header">
          <div class="section-num-badge">8</div>
          <div class="form-section-title">ğŸ“… ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ»äºˆç®—</div>
        </div>
        <div class="form-section-body">
          <div class="form-group">
            <label class="form-label">å¸Œæœ›ã™ã‚‹å…¬é–‹æ™‚æœŸ</label>
            <div class="radio-group" id="launchTimingGroup">
              <label class="radio-item"><input type="radio" name="launchTiming" value="2026å¹´ä¸ŠåŠæœŸï¼ˆã€œ2026å¹´6æœˆï¼‰"><label>2026å¹´ä¸ŠåŠæœŸï¼ˆã€œ2026å¹´6æœˆï¼‰</label></label>
              <label class="radio-item"><input type="radio" name="launchTiming" value="2026å¹´ä¸‹åŠæœŸï¼ˆ2026å¹´7ã€œ12æœˆï¼‰"><label>2026å¹´ä¸‹åŠæœŸï¼ˆ2026å¹´7ã€œ12æœˆï¼‰</label></label>
              <label class="radio-item"><input type="radio" name="launchTiming" value="2027å¹´1æœˆï¼ˆææ¡ˆã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«é€šã‚Šï¼‰"><label>2027å¹´1æœˆï¼ˆææ¡ˆã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«é€šã‚Šï¼‰âœ… æ¨å¥¨</label></label>
              <label class="radio-item"><input type="radio" name="launchTiming" value="æœªå®šãƒ»è¦ç›¸è«‡"><label>æœªå®šãƒ»è¦ç›¸è«‡</label></label>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label">ã”ææ¡ˆé‡‘é¡ï¼ˆÂ¥6,800,000ç¨æŠœï¼‰ã«ã¤ã„ã¦ã®ã”æ„è¦‹</label>
            <div class="radio-group" id="budgetFeedbackGroup">
              <label class="radio-item"><input type="radio" name="budgetFeedback" value="ææ¡ˆé‡‘é¡ã§å•é¡Œãªã„"><label>ææ¡ˆé‡‘é¡ã§å•é¡Œãªã„</label></label>
              <label class="radio-item"><input type="radio" name="budgetFeedback" value="å¤šå°‘å‰Šæ¸›ã—ãŸã„ï¼ˆã‚¹ã‚³ãƒ¼ãƒ—èª¿æ•´ã§å¯¾å¿œå¸Œæœ›ï¼‰"><label>å¤šå°‘å‰Šæ¸›ã—ãŸã„ï¼ˆã‚¹ã‚³ãƒ¼ãƒ—èª¿æ•´ã§å¯¾å¿œå¸Œæœ›ï¼‰</label></label>
              <label class="radio-item"><input type="radio" name="budgetFeedback" value="è¿½åŠ äºˆç®—ã‚’æ¤œè¨ã§ãã‚‹ï¼ˆæ©Ÿèƒ½è¿½åŠ å¸Œæœ›ï¼‰"><label>è¿½åŠ äºˆç®—ã‚’æ¤œè¨ã§ãã‚‹ï¼ˆæ©Ÿèƒ½è¿½åŠ å¸Œæœ›ï¼‰</label></label>
              <label class="radio-item"><input type="radio" name="budgetFeedback" value="å†è¦‹ç©ã‚Šã‚’å¸Œæœ›"><label>å†è¦‹ç©ã‚Šã‚’å¸Œæœ›</label></label>
            </div>
          </div>
          <div class="form-group">
            <label class="form-label" for="budgetNote">äºˆç®—ãƒ»ã‚¹ã‚³ãƒ¼ãƒ—ã«é–¢ã™ã‚‹è£œè¶³<span class="opt">ä»»æ„</span></label>
            <textarea class="form-textarea" id="budgetNote" name="budgetNote" placeholder="ä¾‹ï¼šãƒ‘ãƒ³ãƒ•ãƒ¬ãƒƒãƒˆåˆ¶ä½œã¯åˆ¥é€”è²»ç”¨ã«ã—ã¦ã»ã—ã„ã€æœˆé¡ä¿å®ˆè²»ã‚’æŠ‘ãˆãŸã„ã€ç­‰" style="min-height:80px;"></textarea>
          </div>
        </div>
      </div>

      <!-- â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
           Section 9: ãã®ä»–ãƒ»è‡ªç”±è¨˜å…¥
           â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
      <div class="form-section sec-9">
        <div class="form-section-header">
          <div class="section-num-badge">9</div>
          <div class="form-section-title">ğŸ’¬ ãã®ä»–ãƒ»è‡ªç”±è¨˜å…¥</div>
        </div>
        <div class="form-section-body">
          <div class="form-group">
            <label class="form-label" for="concerns">æ‡¸å¿µç‚¹ãƒ»è³ªå•ãƒ»ã”è¦æœ›<span class="opt">ä»»æ„</span></label>
            <textarea class="form-textarea" id="concerns" name="concerns" placeholder="ã”ä¸å®‰ãªç‚¹ã€ç¢ºèªã—ãŸã„ã“ã¨ã€ãã®ä»–ãªã‚“ã§ã‚‚ã”è¨˜å…¥ãã ã•ã„ã€‚" style="min-height:120px;"></textarea>
          </div>
          <div class="form-group">
            <label class="form-label">ç«¶åˆä»–ç¤¾ã®ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã¨ã®å·®åˆ¥åŒ–ã§æ„è­˜ã—ãŸã„ç‚¹<span class="opt">ä»»æ„</span></label>
            <textarea class="form-textarea" id="differentiation" name="differentiation" placeholder="ä¾‹ï¼šä»–ç¤¾ã‚µãƒ¼ãƒ“ã‚¹ã¨ã®é•ã„ã‚’ã‚‚ã£ã¨æ‰“ã¡å‡ºã—ãŸã„ã€ã€‡ã€‡ç¤¾ã‚ˆã‚Šã‚ã‹ã‚Šã‚„ã™ãã—ãŸã„ã€ãªã©" style="min-height:80px;"></textarea>
          </div>
        </div>
      </div>

      <!-- Submit -->
      <div class="submit-area">
        <button type="submit" class="submit-btn" id="submitBtn">
          ğŸ“¤ å›ç­”ã‚’é€ä¿¡ã™ã‚‹
        </button>
        <p class="submit-note">é€ä¿¡å¾Œã€æ‹…å½“è€…ã‚ˆã‚Šæ”¹ã‚ã¦ã”é€£çµ¡ã„ãŸã—ã¾ã™ã€‚</p>
      </div>

    </form>

    <!-- Thank You Screen -->
    <div id="thank-you">
      <div class="ty-icon">ğŸ‰</div>
      <h2 class="ty-title">ã”å›ç­”ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸï¼</h2>
      <p class="ty-desc">
        è²´é‡ãªã”æ„è¦‹ã‚’ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚<br>
        å†…å®¹ã‚’ç¢ºèªã®ä¸Šã€æ‹…å½“è€…ã‚ˆã‚Šæ”¹ã‚ã¦ã”é€£çµ¡ã„ãŸã—ã¾ã™ã€‚<br><br>
        MTGã§ã®è¦ä»¶æ•´ç†ã«ã—ã£ã‹ã‚Šæ´»ç”¨ã•ã›ã¦ã„ãŸã ãã¾ã™ã€‚
      </p>
    </div>

  </div><!-- /content-wrap -->
</div><!-- /view-client -->


<!-- ============================================================
     ADMIN VIEW
     ============================================================ -->
<div id="view-admin" style="display:none;">

  <header class="admin-header">
    <div>
      <div class="admin-header-title">ğŸ“Š ãƒ’ã‚¢ãƒªãƒ³ã‚°å›ç­” ç®¡ç†ç”»é¢</div>
      <div class="admin-header-sub">FNJ ã‚³ãƒ¼ãƒãƒ¬ãƒ¼ãƒˆã‚µã‚¤ãƒˆ ãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ« â€” ãƒ†ãƒ©æ‹…å½“è€…å°‚ç”¨</div>
    </div>
    <div class="admin-live-badge">
      <div class="live-dot"></div>
      LIVE
    </div>
  </header>

  <div class="admin-wrap">

    <!-- Stats -->
    <div class="admin-stats" id="adminStats">
      <div class="admin-stat-card">
        <div class="admin-stat-icon">ğŸ“‹</div>
        <div>
          <div class="admin-stat-label">ç·å›ç­”æ•°</div>
          <div class="admin-stat-val" id="statTotal">â€”</div>
        </div>
      </div>
      <div class="admin-stat-card">
        <div class="admin-stat-icon">ğŸ•</div>
        <div>
          <div class="admin-stat-label">æœ€æ–°å›ç­”</div>
          <div class="admin-stat-val" id="statLatest" style="font-size:1rem;">â€”</div>
        </div>
      </div>
      <div class="admin-stat-card">
        <div class="admin-stat-icon">ğŸ¯</div>
        <div>
          <div class="admin-stat-label">æœ€å¤šèª²é¡Œ</div>
          <div class="admin-stat-val" id="statTopIssue" style="font-size:0.85rem;line-height:1.3;">â€”</div>
        </div>
      </div>
    </div>

    <!-- Submissions List -->
    <div class="submissions-header">
      <div class="submissions-title">å›ç­”ä¸€è¦§ï¼ˆæ–°ç€é †ï¼‰</div>
      <div class="submissions-sort">ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°ä¸­</div>
    </div>

    <div id="admin-loading">â³ Firestoreã«æ¥ç¶šä¸­...</div>
    <div id="admin-empty">
      <div class="empty-icon">ğŸ“­</div>
      <p>ã¾ã å›ç­”ãŒã‚ã‚Šã¾ã›ã‚“ã€‚<br>ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒãƒ•ã‚©ãƒ¼ãƒ ã‚’é€ä¿¡ã™ã‚‹ã¨ã€ã“ã“ã«ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
    </div>
    <div id="submissions-list"></div>

  </div>
</div><!-- /view-admin -->

<!-- ============================================================
     JAVASCRIPT
     ============================================================ -->
<script>
// ================================================================
// âš ï¸ Firebaseè¨­å®š
// 1. https://console.firebase.google.com/ ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ
// 2. Firestoreã‚’æœ‰åŠ¹åŒ–ï¼ˆæœ¬ç•ªãƒ¢ãƒ¼ãƒ‰ã¾ãŸã¯ãƒ†ã‚¹ãƒˆãƒ¢ãƒ¼ãƒ‰ï¼‰
// 3. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š â†’ ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªè¿½åŠ  â†’ è¨­å®šå€¤ã‚’ã‚³ãƒ”ãƒ¼
// 4. ä¸‹è¨˜ YOUR_XXX ã‚’å®Ÿéš›ã®å€¤ã«ç½®ãæ›ãˆã¦ä¿å­˜ãƒ»ãƒ—ãƒƒã‚·ãƒ¥ã—ã¦ãã ã•ã„
// ================================================================
const firebaseConfig = {
  apiKey:            "AIzaSyDtDu4r15kBnGpyA5IsdDzaZR2Ep46Fio0",
  authDomain:        "fnj-hearing.firebaseapp.com",
  projectId:         "fnj-hearing",
  storageBucket:     "fnj-hearing.firebasestorage.app",
  messagingSenderId: "777832673804",
  appId:             "1:777832673804:web:367656e54c7a9130fbf429",
};
// ================================================================

// â”€â”€ Firebase init â”€â”€
const IS_CONFIGURED = !firebaseConfig.apiKey.startsWith("YOUR_");
let db = null;

if (IS_CONFIGURED) {
  firebase.initializeApp(firebaseConfig);
  db = firebase.firestore();
} else {
  document.getElementById('config-warning').style.display = 'block';
}

// â”€â”€ View routing â”€â”€
const params = new URLSearchParams(window.location.search);
const isAdmin = params.get('view') === 'admin';

if (isAdmin) {
  document.getElementById('view-admin').style.display = 'block';
  if (IS_CONFIGURED) {
    loadSubmissions();
  } else {
    document.getElementById('admin-loading').textContent = 'âš ï¸ Firebaseè¨­å®šãŒæœªå®Œäº†ã§ã™ã€‚HTMLã‚’è¨­å®šå¾Œã«å†ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãã ã•ã„ã€‚';
  }
} else {
  document.getElementById('view-client').style.display = 'block';
  buildFeatureMatrix();
  initProgress();
}

// ================================================================
// FEATURE MATRIX (Section 6)
// ================================================================
const FEATURES = [
  'ã‚µãƒ¼ãƒ“ã‚¹ç´¹ä»‹ãƒšãƒ¼ã‚¸ï¼ˆPCãƒ»ã‚¹ãƒãƒ›å¯¾å¿œï¼‰',
  'ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ ',
  'ã‚µã‚¤ãƒˆå†…æ¤œç´¢æ©Ÿèƒ½',
  'ãƒ‹ãƒ¥ãƒ¼ã‚¹ãƒ»ãŠçŸ¥ã‚‰ã›æ›´æ–°ï¼ˆCMSï¼‰',
  'å°å…¥äº‹ä¾‹ãƒšãƒ¼ã‚¸',
  'æ¡ç”¨æƒ…å ±ãƒšãƒ¼ã‚¸',
  'å±…ä½è€…å‘ã‘ãƒãƒ¼ã‚¿ãƒ«ãƒšãƒ¼ã‚¸',
  'å¤šè¨€èªå¯¾å¿œï¼ˆè‹±èªç­‰ï¼‰',
  'è³‡æ–™ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½',
  'ãƒãƒ£ãƒƒãƒˆãƒ»å•ã„åˆã‚ã›ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆ',
];

function buildFeatureMatrix() {
  const tbody = document.getElementById('featureMatrix');
  if (!tbody) return;
  FEATURES.forEach((feat, i) => {
    const name = 'feat_' + i;
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${feat}</td>
      <td><input type="radio" name="${name}" value="å¿…é ˆ"></td>
      <td><input type="radio" name="${name}" value="ã‚ã‚Œã°è‰¯ã„"></td>
      <td><input type="radio" name="${name}" value="ä¸è¦"></td>
    `;
    tbody.appendChild(tr);
  });
}

// ================================================================
// PROGRESS BAR
// ================================================================
function initProgress() {
  const required = document.querySelectorAll('[required]');
  const allInputs = document.querySelectorAll('input, textarea, select');

  function update() {
    let filled = 0;
    allInputs.forEach(el => {
      if (el.type === 'radio' || el.type === 'checkbox') {
        const group = document.querySelectorAll(`[name="${el.name}"]:checked`);
        if (group.length > 0) filled += 0.5; // partial credit
      } else if (el.value.trim()) {
        filled += 1;
      }
    });
    const total = allInputs.length;
    const pct = Math.min(Math.round((filled / total) * 100), 100);
    document.getElementById('progressFill').style.width = pct + '%';
    document.getElementById('progressPct').textContent = pct + '%';
    document.getElementById('progressLabel').textContent =
      pct < 30 ? 'å…¥åŠ›ã‚’é–‹å§‹ã—ã¦ãã ã•ã„' :
      pct < 70 ? 'é †èª¿ã«é€²ã‚“ã§ã„ã¾ã™' :
      pct < 100 ? 'ã‚‚ã†å°‘ã—ã§ã™ï¼' : 'âœ… å…¥åŠ›å®Œäº†ï¼';
  }

  allInputs.forEach(el => el.addEventListener('input', update));
  allInputs.forEach(el => el.addEventListener('change', update));

  // Checkbox/radio visual update
  document.querySelectorAll('.check-item, .radio-item').forEach(item => {
    const input = item.querySelector('input');
    if (input) {
      input.addEventListener('change', () => {
        if (input.type === 'radio') {
          document.querySelectorAll(`input[name="${input.name}"]`).forEach(r => {
            r.closest('.radio-item')?.classList.remove('checked');
          });
        }
        item.classList.toggle('checked', input.checked);
      });
    }
  });
}

// ================================================================
// FORM SUBMISSION
// ================================================================
document.getElementById('hearingForm')?.addEventListener('submit', async function(e) {
  e.preventDefault();

  // Validate required fields
  const name = document.getElementById('name').value.trim();
  const email = document.getElementById('email').value.trim();
  const targetPriority = document.querySelector('input[name="targetPriority"]:checked')?.value;
  const designImage = document.querySelector('input[name="designImage"]:checked')?.value;

  if (!name || !email) {
    alert('ãŠåå‰ã¨ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¯å¿…é ˆé …ç›®ã§ã™ã€‚');
    return;
  }
  if (!targetPriority) {
    alert('Section 3ã€Œé‡è¦–ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼å±¤ã€ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚');
    return;
  }
  if (!designImage) {
    alert('Section 5ã€Œå¸Œæœ›ã™ã‚‹ã‚µã‚¤ãƒˆã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã€ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚');
    return;
  }

  if (!IS_CONFIGURED) {
    alert('Firebaseè¨­å®šãŒæœªå®Œäº†ã®ãŸã‚é€ä¿¡ã§ãã¾ã›ã‚“ã€‚HTMLã®è¨­å®šã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚');
    return;
  }

  const btn = document.getElementById('submitBtn');
  btn.disabled = true;
  btn.textContent = 'â³ é€ä¿¡ä¸­...';

  // Collect form data
  const getChecked = (name) => {
    return Array.from(document.querySelectorAll(`input[name="${name}"]:checked`)).map(el => el.value);
  };
  const getRadio = (name) => document.querySelector(`input[name="${name}"]:checked`)?.value || '';
  const getVal = (id) => document.getElementById(id)?.value.trim() || '';

  // Feature matrix
  const features = {};
  FEATURES.forEach((feat, i) => {
    features[feat] = getRadio('feat_' + i) || 'æœªå›ç­”';
  });

  const data = {
    submittedAt: firebase.firestore.FieldValue.serverTimestamp(),
    basicInfo: {
      name:  getVal('name'),
      dept:  getVal('dept'),
      email: getVal('email'),
      phone: getVal('phone'),
    },
    currentIssues: {
      problems:    getChecked('problems'),
      otherDetail: getVal('problemsOther'),
    },
    target: {
      priority:    getRadio('targetPriority'),
      b2bTargets:  getChecked('b2bTargets'),
      detail:      getVal('targetDetail'),
    },
    goals: {
      goals:    getChecked('goals'),
      topGoal:  getVal('topGoal'),
    },
    design: {
      imageKeyword:  getRadio('designImage'),
      brandColor:    getRadio('brandColor'),
      references:    getVal('referenceUrls'),
      ngDesign:      getVal('ngDesign'),
    },
    features: features,
    seo: {
      measures:   getChecked('seoMeasures'),
      keywords:   getVal('keywords'),
      adsSupport: getRadio('adsSupport'),
    },
    schedule: {
      launchTiming:    getRadio('launchTiming'),
      budgetFeedback:  getRadio('budgetFeedback'),
      budgetNote:      getVal('budgetNote'),
    },
    other: {
      concerns:        getVal('concerns'),
      differentiation: getVal('differentiation'),
    },
  };

  try {
    await db.collection('hearings').add(data);
    // Show thank you
    document.getElementById('hearingForm').style.display = 'none';
    document.getElementById('thank-you').style.display = 'block';
    window.scrollTo({ top: 0, behavior: 'smooth' });
  } catch (err) {
    console.error('Firestore error:', err);
    alert('é€ä¿¡ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚\n' + err.message);
    btn.disabled = false;
    btn.textContent = 'ğŸ“¤ å›ç­”ã‚’é€ä¿¡ã™ã‚‹';
  }
});

// ================================================================
// ADMIN: LOAD SUBMISSIONS (REAL-TIME)
// ================================================================
function loadSubmissions() {
  const listEl   = document.getElementById('submissions-list');
  const emptyEl  = document.getElementById('admin-empty');
  const loadEl   = document.getElementById('admin-loading');

  db.collection('hearings')
    .orderBy('submittedAt', 'desc')
    .onSnapshot(snapshot => {
      loadEl.style.display  = 'none';
      listEl.innerHTML      = '';

      if (snapshot.empty) {
        emptyEl.style.display = 'block';
        updateStats([], null);
        return;
      }

      emptyEl.style.display = 'none';
      const docs = snapshot.docs.map(d => ({ id: d.id, ...d.data() }));

      updateStats(docs, docs[0]);
      docs.forEach(doc => listEl.appendChild(buildCard(doc)));
    }, err => {
      loadEl.textContent = 'âŒ ãƒ‡ãƒ¼ã‚¿å–å¾—ã‚¨ãƒ©ãƒ¼: ' + err.message;
    });
}

function updateStats(docs, latest) {
  document.getElementById('statTotal').textContent = docs.length;

  if (latest && latest.submittedAt) {
    const d = latest.submittedAt.toDate();
    document.getElementById('statLatest').textContent =
      d.toLocaleDateString('ja-JP') + ' ' + d.toLocaleTimeString('ja-JP', { hour: '2-digit', minute: '2-digit' });
  }

  // Most common issue
  const issueCount = {};
  docs.forEach(doc => {
    (doc.currentIssues?.problems || []).forEach(p => {
      issueCount[p] = (issueCount[p] || 0) + 1;
    });
  });
  const top = Object.entries(issueCount).sort((a, b) => b[1] - a[1])[0];
  if (top) {
    document.getElementById('statTopIssue').textContent = top[0].replace(/ï¼ˆ.+?ï¼‰/g, '');
  }
}

function buildCard(doc) {
  const card = document.createElement('div');
  card.className = 'sub-card';

  const info    = doc.basicInfo   || {};
  const issues  = doc.currentIssues || {};
  const target  = doc.target      || {};
  const design  = doc.design      || {};
  const goals   = doc.goals       || {};
  const seo     = doc.seo         || {};
  const sched   = doc.schedule    || {};
  const other   = doc.other       || {};
  const feats   = doc.features    || {};

  const initial = (info.name || '?').charAt(0).toUpperCase();
  const timeStr = doc.submittedAt
    ? doc.submittedAt.toDate().toLocaleString('ja-JP')
    : 'é€ä¿¡æ™‚åˆ»ä¸æ˜';

  const tagsHtml = (arr = []) =>
    arr.length ? `<div class="tag-list">${arr.map(t => `<span class="sub-tag">${t}</span>`).join('')}</div>` : '<span class="sub-field-value empty">æœªé¸æŠ</span>';

  const val = (v, fallback = 'â€”') => v?.trim() ? v : `<span class="sub-field-value empty">${fallback}</span>`;

  // Feature matrix summary
  const featRequired = Object.entries(feats).filter(([,v]) => v === 'å¿…é ˆ').map(([k]) => k);
  const featNice     = Object.entries(feats).filter(([,v]) => v === 'ã‚ã‚Œã°è‰¯ã„').map(([k]) => k);

  card.innerHTML = `
    <div class="sub-card-header" onclick="toggleCard(this)">
      <div class="sub-card-left">
        <div class="sub-avatar">${initial}</div>
        <div>
          <div class="sub-name">${info.name || 'åå‰ãªã—'}</div>
          <div class="sub-dept">${info.dept || ''} ${info.email ? 'â€” ' + info.email : ''}</div>
        </div>
      </div>
      <div class="sub-card-meta">
        <div class="sub-time">${timeStr}</div>
        <div class="sub-expand-icon">â–¼</div>
      </div>
    </div>
    <div class="sub-card-body">
      <div class="sub-section-divider">ğŸ‘¤ åŸºæœ¬æƒ…å ±</div>
      <div class="sub-grid">
        <div class="sub-field"><div class="sub-field-label">æ°å</div><div class="sub-field-value">${info.name || 'â€”'}</div></div>
        <div class="sub-field"><div class="sub-field-label">éƒ¨ç½²</div><div class="sub-field-value">${val(info.dept)}</div></div>
        <div class="sub-field"><div class="sub-field-label">ãƒ¡ãƒ¼ãƒ«</div><div class="sub-field-value">${info.email || 'â€”'}</div></div>
        <div class="sub-field"><div class="sub-field-label">é›»è©±</div><div class="sub-field-value">${val(info.phone)}</div></div>
      </div>

      <div class="sub-section-divider">ğŸ” ç¾è¡Œã‚µã‚¤ãƒˆã®èª²é¡Œ</div>
      <div class="sub-field"><div class="sub-field-label">é¸æŠã—ãŸèª²é¡Œ</div>${tagsHtml(issues.problems)}</div>
      <div class="sub-field" style="margin-top:0.5rem;"><div class="sub-field-label">è©³ç´°</div><div class="sub-field-value">${val(issues.otherDetail)}</div></div>

      <div class="sub-section-divider">ğŸ¯ ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ»ç›®æ¨™</div>
      <div class="sub-grid">
        <div class="sub-field"><div class="sub-field-label">é‡è¦–ãƒ¦ãƒ¼ã‚¶ãƒ¼å±¤</div><div class="sub-field-value">${target.priority || 'â€”'}</div></div>
        <div class="sub-field"><div class="sub-field-label">B2Bã‚¿ãƒ¼ã‚²ãƒƒãƒˆ</div>${tagsHtml(target.b2bTargets)}</div>
      </div>
      <div class="sub-field"><div class="sub-field-label">ãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«ç›®æ¨™</div>${tagsHtml(goals.goals)}</div>
      <div class="sub-field" style="margin-top:0.5rem;"><div class="sub-field-label">æœ€é‡è¦ç›®æ¨™</div><div class="sub-field-value">${val(goals.topGoal)}</div></div>

      <div class="sub-section-divider">ğŸ¨ ãƒ‡ã‚¶ã‚¤ãƒ³</div>
      <div class="sub-grid">
        <div class="sub-field"><div class="sub-field-label">ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰</div><div class="sub-field-value">${design.imageKeyword || 'â€”'}</div></div>
        <div class="sub-field"><div class="sub-field-label">ãƒ–ãƒ©ãƒ³ãƒ‰ã‚«ãƒ©ãƒ¼</div><div class="sub-field-value">${design.brandColor || 'â€”'}</div></div>
      </div>
      <div class="sub-field"><div class="sub-field-label">å‚è€ƒã‚µã‚¤ãƒˆ</div><div class="sub-field-value">${val(design.references)}</div></div>
      <div class="sub-field"><div class="sub-field-label">NGãƒ‡ã‚¶ã‚¤ãƒ³</div><div class="sub-field-value">${val(design.ngDesign)}</div></div>

      <div class="sub-section-divider">âš™ï¸ æ©Ÿèƒ½è¦ä»¶</div>
      <div class="sub-field"><div class="sub-field-label">å¿…é ˆã¨å›ç­”ã—ãŸæ©Ÿèƒ½</div>${tagsHtml(featRequired)}</div>
      <div class="sub-field" style="margin-top:0.5rem;"><div class="sub-field-label">ã‚ã‚Œã°è‰¯ã„ã¨å›ç­”ã—ãŸæ©Ÿèƒ½</div>${tagsHtml(featNice)}</div>

      <div class="sub-section-divider">ğŸ“ˆ SEOãƒ»é›†å®¢</div>
      <div class="sub-grid">
        <div class="sub-field"><div class="sub-field-label">ç¾åœ¨ã®æ–½ç­–</div>${tagsHtml(seo.measures)}</div>
        <div class="sub-field"><div class="sub-field-label">åºƒå‘Šã‚µãƒãƒ¼ãƒˆ</div><div class="sub-field-value">${seo.adsSupport || 'â€”'}</div></div>
      </div>
      <div class="sub-field"><div class="sub-field-label">ç‹™ã„ãŸã„ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰</div><div class="sub-field-value">${val(seo.keywords)}</div></div>

      <div class="sub-section-divider">ğŸ“… ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒ»äºˆç®—</div>
      <div class="sub-grid">
        <div class="sub-field"><div class="sub-field-label">å…¬é–‹å¸Œæœ›æ™‚æœŸ</div><div class="sub-field-value">${sched.launchTiming || 'â€”'}</div></div>
        <div class="sub-field"><div class="sub-field-label">äºˆç®—ã¸ã®æ„è¦‹</div><div class="sub-field-value">${sched.budgetFeedback || 'â€”'}</div></div>
      </div>
      <div class="sub-field"><div class="sub-field-label">äºˆç®—ãƒ¡ãƒ¢</div><div class="sub-field-value">${val(sched.budgetNote)}</div></div>

      <div class="sub-section-divider">ğŸ’¬ ãã®ä»–</div>
      <div class="sub-field"><div class="sub-field-label">æ‡¸å¿µãƒ»è³ªå•</div><div class="sub-field-value">${val(other.concerns)}</div></div>
      <div class="sub-field"><div class="sub-field-label">å·®åˆ¥åŒ–ãƒã‚¤ãƒ³ãƒˆ</div><div class="sub-field-value">${val(other.differentiation)}</div></div>
    </div>
  `;
  return card;
}

function toggleCard(header) {
  header.closest('.sub-card').classList.toggle('expanded');
}
</script>

</body>
</html>
